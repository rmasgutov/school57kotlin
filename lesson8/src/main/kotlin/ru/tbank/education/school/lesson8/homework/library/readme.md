# Null-safety. Unit - тестирование

## Сервис управления библиотекой

### Описание

Вам предоставлен частично реализованный класс `LibraryService`, содержащий базовую функциональность для управления
книгами в библиотеке.  
На данный момент реализация **неполная и содержит ошибки** — методы не проверяют входные данные, не соблюдают
бизнес-правила и не выбрасывают ожидаемые исключения.

Ваша задача — **доработать методы класса `LibraryService` на основе тестов**, чтобы они:

- Корректно реализовывали бизнес-логику
- Выбрасывали `IllegalArgumentException` в ожидаемых случаях
- Соблюдали правила библиотеки
- Проходили все тесты

### Что нужно сделать

1. Изучите тесты в классе `LibraryServiceTest`.
2. На их основе восстановите недостающую логику в методах:
    - `fun addBook(book: Book)`
    - `fun borrowBook(isbn: String, borrower: String)`
    - `fun returnBook(isbn: String)`
    - `fun isAvailable(isbn: String): Boolean`
    - `fun calculateOverdueFine(isbn: String, daysOverdue: Int): Int`
3. Убедитесь, что:
    - Все тесты проходят.
    - Исключения выбрасываются **только через `IllegalArgumentException`** (если явно не указано иное).
    - Сообщения в исключениях информативны.
    - Бизнес-правила соблюдены.

### Бизнес-правила библиотеки

- Книгу можно выдать только если:
    - Она добавлена в каталог.
    - Она не выдана другому читателю.
    - У читателя нет непогашенных штрафов.
- Вернуть можно только выданную книгу.
- Штраф за просрочку:
    - Первые 10 дней — льготный период (штраф 0).
    - За каждый день просрочки после 10-го дня — 60 копеек.
- Нельзя брать книги с долгом.

### Тесты

Тесты находятся в пакете `ru.tbank.education.school.lesson8.homework`.  
Они покрывают следующие сценарии:

- Книгу можно взять, если она доступна.
- Нельзя взять одну и ту же книгу дважды.
- После возврата книга становится доступной.
- Нельзя вернуть книгу, которая не была выдана.
- Нельзя взять книгу, которой нет в каталоге.
- Штраф не начисляется в пределах льготного периода.
- Штраф рассчитывается корректно при просрочке.
- Читатель с непогашенным штрафом не может брать книги.

Каждый тест помечен аннотацией `@DisplayName` для удобства понимания.

### Требования к выполнению

- Код должен успешно проходить все тесты.
- GitHub Actions автоматически запускает команду `./gradlew check` при каждом коммите.
- Задание считается выполненным, если:
    - Все тесты проходят.
    - Логика соответствует ожиданиям, восстановленным из тестов.
    - Нет "хардкодных" заглушек или обходов логики.
    - Исключения выбрасываются с понятными сообщениями.
    - Проверка в GitHub Actions проходит успешно (появляется зеленая галочка на PR).
- Дедлайн: 28 ноября 2025 года, 23:59 по московскому времени. Задание, сданное после дедлайна, **не принимается**.

### Как проверить локально

1. Убедитесь, что у вас установлен JDK 17 или выше.
2. Откройте терминал в корне проекта.
3. Выполните команду:
   ```bash
   ./gradlew check
   ```